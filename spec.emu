<!doctype html>
<meta charset="utf8">
<link rel="stylesheet" href="./spec.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<script src="./spec.js"></script>
<pre class="metadata">
title: Immediately Executed Arrow Function
stage: 4
contributors: EdSaleh
</pre>

<emu-clause id="sec-demo-clause">
  <h1>This is an emu-clause</h1>
  <p>This is an algorithm:</p>
  <emu-alg>
    1. Let _proposal_ be *undefined*.
    1. If IsAccepted(_proposal_),
      1. Let _stage_ be *0*.
    1. Else,
      1. Let _stage_ be *-1*.
    1. Return ? ToString(_proposal_).
  </emu-alg>
</emu-clause>

<h1 id="introduction">Introduction</h1>
<p><strong>Hello,</strong></p>
<p><strong>I had an idea to allow returns from statements and decided to do a research and found Do Expression proposal very similar and more complex than my idea.</strong></p>
<p><strong>My idea is basically to create a new keyword syntax as a shortcut for an executed arrow function. It behaves same as arrow function.</strong></p>
<h1 id="examples-">Examples:</h1>
<pre><code class="lang-ts">const 
 a=<span class="hljs-number">1</span>,
 b = <span class="hljs-keyword">do</span> <span class="hljs-keyword">if</span>(a) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;;
</code></pre>
<h1 id="transpilation-">Transpilation:</h1>
<pre><code class="lang-ts">const 
 a=<span class="hljs-number">1</span>,
 b = <span class="hljs-function">(<span class="hljs-params">()</span>=&gt;</span> {<span class="hljs-keyword">if</span>(a) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>})();
</code></pre>
<p><strong>We can also use alternative names or keywords for this new feature.</strong></p>
<h1 id="examples-">Examples:</h1>
<ul>
<li>-&gt;</li>
<li>=&gt; (preceded by an expression and followed by a block or a statement)</li>
</ul>
<pre><code class="lang-ts">const 
 a=<span class="hljs-number">1</span>,
 b = -&gt; <span class="hljs-keyword">if</span>(a) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;;
</code></pre>
<pre><code class="lang-ts"><span class="hljs-keyword">const</span> 
 a=<span class="hljs-number">1</span>,
 b = =&gt; <span class="hljs-keyword">if</span>(a) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;;
</code></pre>
<p>Or</p>
<pre><code class="lang-ts"><span class="hljs-keyword">const</span> 
 a=<span class="hljs-number">1</span>,
 b = =&gt;{ <span class="hljs-keyword">if</span>(a) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;};
</code></pre>
<h3 id="we-might-call-syntax-a-immediately-executed-arrow-function-">We might call <code>=&gt;</code> syntax a <em>Immediately Executed Arrow Function</em></h3>
<p><strong>We can even pass parameters as an object:</strong></p>
<pre><code class="lang-ts"><span class="hljs-keyword">const</span> 
 a=<span class="hljs-number">1</span>,
 b = {<span class="hljs-keyword">value</span>:a} =&gt; <span class="hljs-keyword">if</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">return</span> <span class="hljs-keyword">value</span>; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
</code></pre>
<h2 id="match-example-">Match Example:</h2>
<pre><code class="lang-ts"><span class="hljs-keyword">const</span> a=<span class="hljs-number">1</span>,b=<span class="hljs-number">2</span>;
<span class="hljs-keyword">const</span> c = 
    {a,b}=&gt; {
        <span class="hljs-keyword">if</span>(a) <span class="hljs-keyword">return</span> a; 
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(b) <span class="hljs-keyword">return</span> b; 
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
console.<span class="hljs-built_in">log</span>(c)
</code></pre>
<h2 id="pipe-and-chaining-example">Pipe and Chaining Example</h2>
<p><strong>Consecutive chains inherit the single parameter of single field object of parent chain, each assigning return value to that single field object property and passing that as parameters to next chain. We can enforce rule for my proposal to only have one object with one field as the parameter, that field can be be assigned as any object of course.</strong></p>
<pre><code class="lang-ts"><span class="hljs-keyword">const</span> <span class="hljs-keyword">value</span>=<span class="hljs-number">1</span>;
<span class="hljs-keyword">const</span> c = {<span class="hljs-keyword">value</span>} 
    =&gt; <span class="hljs-keyword">value</span>+<span class="hljs-number">1</span>
    =&gt; <span class="hljs-keyword">value</span>+<span class="hljs-number">1</span>
    =&gt; <span class="hljs-keyword">value</span>+<span class="hljs-number">2</span>
console.log(c) <span class="hljs-comment">//5</span>
</code></pre>
<p><em>Alternative Syntax:</em></p>
<pre><code class="lang-ts"><span class="hljs-keyword">const</span> c = <span class="hljs-keyword">value</span>
    -&gt; <span class="hljs-keyword">value</span>+<span class="hljs-number">1</span>
    -&gt; <span class="hljs-keyword">value</span>+<span class="hljs-number">1</span>
    -&gt; <span class="hljs-keyword">value</span>+<span class="hljs-number">2</span>
console.log(c) <span class="hljs-comment">//5</span>
</code></pre>
<p><strong>We can of course discuss the syntax, my proposal has 3 suggestions: =&gt;, -&gt;, do. The reason I prefer =&gt; is because my method is actually based on anonymous method, just immediately executed, and allowing flexibility.</strong></p>
<p>Thank you,</p>
